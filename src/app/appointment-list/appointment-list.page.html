<ion-header>
  <ion-toolbar class="custom_header">
    <ion-buttons slot="start">
			<ion-menu-button></ion-menu-button>
		</ion-buttons>
    <ion-title>Appointment List</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="ion-padding">
    <p class="center theme_color clinic_head" *ngIf="clinic_name.length>0">{{clinic_name}}</p>
    <ion-searchbar  placeholder="Search by patient name or file no" [(ngModel)]="searchQuery" (keyup)="searchByKeyword($event)"></ion-searchbar>
    <div class="single_field">
      <ion-item>
        <ion-label>From Date</ion-label>
        <ion-input class="testing_input" [(ngModel)]="from_date" name="from_date"  (click)="from_date_picker()"></ion-input>
        <!-- <ion-datetime displayFormat="MMM DD, YYYY" (ionChange)="selectedAppointment()" [(ngModel)]="from_date"  name="from_date" ></ion-datetime> -->
      </ion-item>
    </div>
    <div class="single_field">
      <ion-item>
        <ion-label>To Date</ion-label>
        <ion-input class="testing_input" [(ngModel)]="to_date" name="to_date" (click)="to_date_picker()"></ion-input>
        <!-- <ion-datetime displayFormat="MMM DD, YYYY" (ionChange)="selectedAppointment()" [(ngModel)]="to_date"  name="to_date" ></ion-datetime> -->
      </ion-item>
    </div>
    <div class="single_field" style="text-align: center;">
      <ion-button class="theme_btn" type="submit" (click)="selectedAppointment()">
         Search
      </ion-button>
    </div>
    <ion-list *ngIf="appoint_list.length > 0">
      <ion-list-header>
        Appointment List ({{appoint_count}})
      </ion-list-header>
      <div class="export_btn" ><ion-button shape="round" color="dark" (click)='makePdf()' fill="outline"><ion-icon name="download-outline"></ion-icon></ion-button></div>
      <div class="export_doc_btn" ><ion-button shape="round" color="dark" (click)='makeDoc()' fill="outline"><ion-icon name="download-outline"></ion-icon> Doc</ion-button></div>
      <ion-item-group  lines="none" *ngFor="let patient of appoint_list; let i = index">
        <ion-item-divider lines="none" class="list_sr_no">
           Sno. - {{i+1}} <ion-checkbox color="primary" class="appoint_check_box" (ionChange)="selectpatient($event,patient.id)"></ion-checkbox>
      </ion-item-divider>
      <ion-item lines="full">
        <ion-avatar slot="start">          
          <img src="assets/images/user.png">
          
        </ion-avatar>
        <ion-label>
          
          <h2 class="captial">{{patient.patient_name}} ({{patient.file_no}})</h2>
          <p>Clinic : {{patient.clinic_name}}</p>
          <h3 *ngIf="patient.full_name!=''">Scheduled By : {{patient.full_name}}</h3>
          <h3 *ngIf="patient.full_name==''">Scheduled By : {{patient.short_name}}</h3>
          <h3>Date : {{patient.date}}</h3>
          <h3>Time : {{patient.time}}</h3>
          <ion-button shape="round" (click)="deleteAppointment(patient.id)" class="custom_btn" fill="outline">Delete</ion-button>
          <ion-button shape="round" routerLink="/reschedule-appointment/{{patient.id}}" class="custom_btn" fill="outline">Re-Schedule</ion-button>
        </ion-label>
      </ion-item>
      </ion-item-group> 
      <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
        </ion-infinite-scroll-content>
      </ion-infinite-scroll>
      <div class="center"><ion-button class="theme_btn send_clinic_btn"  (click)='sendToClinic()'>Send to clinic</ion-button></div>    
    </ion-list>
    <div *ngIf="error_m!=''" class="error_msg">{{error_m}}</div>
  </div>
</ion-content>
